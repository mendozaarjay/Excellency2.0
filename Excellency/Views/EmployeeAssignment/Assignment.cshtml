@model Excellency.ViewModels.EmployeeAssignViewModel
@{
    ViewData["Title"] = "Employee Assignment";
}

<div class="panel panel-headline">
    <div class="panel-heading">
        <h3 class="panel-title">@Model.Employee.Name</h3>
        <p class="panel-subtitle">@Model.Employee.Position</p>
    </div>
    <div class="panel-body">
        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">Behavioral Factor</h3>
            </div>
            <div class="panel-body">
                <div>
                    @using (Html.BeginForm("SaveBehavioralFactor", "EmployeeAssignment"))
                    {
                        @Html.AntiForgeryToken()
                        <input type="hidden" id="employeeid" name="employee.id" value="@Model.Employee.Id"/>
                        <div class="form-group">
                            <label for="SelectedBehavioralFactors">Select Behavioral Factor to Add</label>
                            <select multiple class="chosen-select form-control" data-placeholder="Select Behavioral Factor" name="SelectedBehavioralFactors" id="SelectedBehavioralFactors">
                                @foreach (var item in Model.BehavioralFactors)
                                {
                                    <option value="@item.Id">@item.Title</option>
                                }
                            </select>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">Add To List</button>
                        </div>
                    }
                </div>
                <div class="table-responsive">
                    <table class="table table-condensed">
                        <thead>
                            <tr>
                                <th hidden="hidden">Id</th>
                                <th>Title</th>
                                <th>Description</th>
                                <th>Weight</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach(var item in Model.AssignedBehavioralItems)
                            {
                                <tr>
                                    <td hidden="hidden">@item.Id</td>
                                    <td>@item.Title</td>
                                    <td>@item.Description</td>
                                    <td>@item.Weight</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="panel">
            <div class="panel-heading">
                <h3 class="panel-title">Key Result Area</h3>
            </div>
            <div class="panel-body">
                <div>
                    @using (Html.BeginForm("SaveKRAItems", "EmployeeAssignment"))
                    {
                        @Html.AntiForgeryToken()
                        <input type="hidden" id="employeeid" name="employee.id" value="@Model.Employee.Id"/>
                        <div class="form-group">
                            <label for="SelectedKeyResultAreas">Select Key Result Area to Add</label>
                            <select multiple class="chosen-select form-control" data-placeholder="Select Key Result Area" name="SelectedKeyResultAreas" id="SelectedKeyResultAreas">
                                @foreach (var item in Model.KeyResultAreas)
                                {
                                    <option value="@item.Id">@item.Title</option>
                                }
                            </select>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary">Add To List</button>
                        </div>
                    }
                </div>
                <div class="table-responsive">
                    <table class="table table-condensed">
                        <thead>
                            <tr>
                                <th hidden="hidden">Id</th>
                                <th>Title</th>
                                <th>Description</th>
                                <th>Weight</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.AssignedKeyResultsItems)
                            {
                                <tr>
                                    <td hidden="hidden">@item.Id</td>
                                    <td>@item.Title</td>
                                    <td>@item.Description</td>
                                    <td>@item.Weight</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    <script type="text/javascript">
        $(function () {
            $(".chosen-select").chosen(
                { width: "100%" }
            );
        });
    </script>   
    <script type="text/javascript">
        $('#delete').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)
            var id = button.data('whatever')
            var modal = $(this)
            modal.find('.modal-body input').val(id)
        })
    </script>
}